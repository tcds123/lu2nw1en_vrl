{"timestamp": "2025-11-26T17:24:10.758502", "sample_id": 1, "iteration": 0, "a_model": {"input": "<|im_start|>user\nI will provide you with some examples of generating system prompts. Please carefully study and understand the content and structure of these examples.\n\nExamples:\n【示例1】\nInput:\n\"Original prompt:You are given a YAML file generated by OpenCV, which may contain commented lines that interfere with parsing using PyYAML. Your task is to implement a function `clean_opencv_yaml` that reads the file, removes all commented lines, and returns the cleaned YAML content as a string. The function should handle nested comments and maintain proper YAML formatting, even within sequences or mappings. The function should accept the file path as input and return the cleaned YAML content as a string. If the file format is not recognized as an OpenCV-generated YAML file, the function should raise a `ValueError`.\\n\\n**Sample Input:**\\n```\\n%YAML:1.0\\n# This is a comment\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  # This is another comment\\n  channels: 3\\n# End of file\\n```\\n\\n**Sample Output:**\\n```\\n%YAML:1.0\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  channels: 3\\n```\n\"Correct code:```python\\nimport re\\n\\ndef clean_opencv_yaml(file_path):\\n    \\\"\\\"\\\"\\n    Read an OpenCV-written YAML file, remove commented lines, and return the cleaned content.\\n\\n    :param file_path: Path to the YAML file.\\n    :return: Cleaned YAML content as a string.\\n    :raises ValueError: If the file format is not supported.\\n    :raises FileNotFoundError: If the file does not exist.\\n    \\\"\\\"\\\"\\n    try:\\n        with open(file_path, 'r') as file:\\n            content = file.readlines()\\n    except FileNotFoundError:\\n        raise FileNotFoundError(f\\\"The file at {file_path} was not found.\\\")\\n\\n    cleaned_lines = []\\n    in_mapping = False\\n\\n    for line in content:\\n        stripped_line = line.strip()\\n\\n        if stripped_line.startswith('%YAML'):\\n            in_mapping = True\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping and stripped_line == '---':\\n            in_mapping = False\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping:\\n            if not stripped_line.startswith('%') and stripped_line:\\n                cleaned_lines.append(line)\\n            elif re.match(r'^\\\\s*-|^\\\\s*\\\\w+:', stripped_line) or not stripped_line:\\n                cleaned_lines.append(line)\\n        elif stripped_line.startswith('%'):\\n            continue\\n\\n        else:\\n            cleaned_lines.append(line)\\n\\n    if not in_mapping:\\n        raise ValueError(\\\"Unsupported file format: The file does not appear to be an OpenCV written YAML file.\\\")\\n\\n    return ''.join(cleaned_lines)\\n\\n# Example usage:\\n# cleaned_yaml = clean_opencv_yaml('path\\/to\\/opencv_yaml.yaml')\\n# print(cleaned_yaml)\\n```\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \n. You must meticulously analyze the given problem, choose appropriate algorithms and data structures for efficiency, and ensure the implementation is clean, well-structured, and easy to maintain \n. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\nno netural language!\n\n【示例2】\nInput:\n\"Original prompt:You are given an array of integers `digits` and an integer `n`. Your task is to compute the sum of the products of every `n` consecutive digits in the array, but only include those products that are prime numbers. If `n` is greater than the length of the array, return 0.\\n\n\"Correct code:```python\\ndef is_prime(num):\\n    \\\"\\\"\\\"Check if a number is prime.\\\"\\\"\\\"\\n    if num <= 1:\\n        return False\\n    if num <= 3:\\n        return True\\n    if num % 2 == 0 or num % 3 == 0:\\n        return False\\n    i = 5\\n    while i * i <= num:\\n        if num % i == 0 or num % (i + 2) == 0:\\n            return False\\n        i += 6\\n    return True\\n\\ndef sum_of_products(digits, n):\\n    \\\"\\\"\\\"Compute the sum of the products of every n consecutive digits in the array,\\n    considering only those sequences whose product is a prime number.\\\"\\\"\\\"\\n    if n > len(digits):\\n        return 0\\n    \\n    total_sum = 0\\n    for i in range(len(digits) - n + 1):\\n        product = 1\\n        for j in range(n):\\n            product *= digits[i + j]\\n        if is_prime(product):\\n            total_sum += product\\n    return total_sum\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \npay attention to the tokes： integer,python,code\n\n【示例3】\nInput:\n\"Original prompt:You are given a string `units` consisting of uppercase and lowercase English letters. Each character in the string represents a chemical unit. Two units can react with each other if one is the lowercase version of the other or vice versa. When two units react, they are removed from the string.\\n\\nYour task is to write a function that processes the string `units` and returns a new string where all possible reactions have occurred. The function should continue reacting units until no more reactions are possible. After performing the reactions, sort the remaining units in ascending order, maintaining the original case for each unit. The sorting should be case-insensitive.\\n\n\"Correct code:\"```python\\ndef react_and_sort_units(units: str) -> str:\\n    \\\"\\\"\\\"\\n    Processes a string of chemical units, removing reacting pairs and sorting the remaining units.\\n    \\n    :param units: A string of chemical units consisting of uppercase and lowercase English letters.\\n    :return: A string of the remaining units after reactions and sorting.\\n    \\\"\\\"\\\"\\n    def can_react(unit1: str, unit2: str) -> bool:\\n        return unit1 != unit2 and unit1.lower() == unit2.lower()\\n\\n    stack = []\\n    \\n    for unit in units:\\n        if stack and can_react(stack[-1], unit):\\n            stack.pop()\\n        else:\\n            stack.append(unit)\\n\\n    sorted_units = sorted(stack, key=lambda x: x.lower())\\n    \\n    return ''.join(sorted_units)\\n\\n# Example usage:\\ninput_units = \\\"AaBb\\\"\\nresult = react_and_sort_units(input_units)\\nprint(result)  # Output should be \\\"Bb\\\"\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. you must have no netural language! \nplease pay attention to the tokes：units,task,Sample and so on\n\nBased on the examples above, generate an English system prompt for the following input (follow the same format as examples),IMPORTANT RULES:\nOutput ONLY the final system prompt, with NO intermediate thinking, explanations, or reasoning.\nDo NOT include phrases like 'Let me think', 'First, I need to', or any similar thought process.\nIt is not allowed to output any thinking and explanatory statements, only the generated system prompts:\n【Input】\nOriginal prompt: You are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\nCorrect code: ```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```\n【model_Output】\n<|im_end|>\n<|im_start|>assistant\n", "output": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided. \n\nThe system prompt should mirror the structure of the examples. It needs to emphasize producing high-quality, production-ready code, focusing on correctness, readability, performance, and best practices. Also, it must mention analyzing the problem, choosing appropriate algorithms, and ensuring the code is clean and maintainable.\n\nI should make sure to include the specific tokens mentioned in the rules, like \"task\", \"Sample\", etc., but in this case, the input doesn't have a sample. Wait, the third example had a sample input and output. The current input here doesn't have a sample, so maybe I don't need to include that part. \n\nThe correct code is given, so the output should be a prompt that directs the AI to generate code that exactly matches the correct code's functionality. Also, the output must not include any explanations"}, "b_model": [{"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided. \n\nThe system prompt should mirror the structure of the examples. It needs to emphasize producing high-quality, production-ready code, focusing on correctness, readability, performance, and best practices. Also, it must mention analyzing the problem, choosing appropriate algorithms, and ensuring the code is clean and maintainable.\n\nI should make sure to include the specific tokens mentioned in the rules, like \"task\", \"Sample\", etc., but in this case, the input doesn't have a sample. Wait, the third example had a sample input and output. The current input here doesn't have a sample, so maybe I don't need to include that part. \n\nThe correct code is given, so the output should be a prompt that directs the AI to generate code that exactly matches the correct code's functionality. Also, the output must not include any explanations\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.", "output": "As an AI code generation expert, your task is to write a function that takes a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\n\nEnsure that the code is correct, efficient, and follows best practices for readability and maintainability. Use appropriate algorithms and data structures to solve the problem. The function should be named `maxNonOverlappingTasks` and should return an integer representing the maximum number of non-overlapping tasks.\n\n```python\ndef maxNonOverlappingTasks(tasks):\n    if not tasks:\n        return 0\n\n    count = 0\n    end_time = float('-inf')\n\n    for task in tasks:\n        if task[0] >= end_time:\n            count += 1\n            end_time = task[1]\n\n    return count\n```"}, {"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided. \n\nThe system prompt should mirror the structure of the examples. It needs to emphasize producing high-quality, production-ready code, focusing on correctness, readability, performance, and best practices. Also, it must mention analyzing the problem, choosing appropriate algorithms, and ensuring the code is clean and maintainable.\n\nI should make sure to include the specific tokens mentioned in the rules, like \"task\", \"Sample\", etc., but in this case, the input doesn't have a sample. Wait, the third example had a sample input and output. The current input here doesn't have a sample, so maybe I don't need to include that part. \n\nThe correct code is given, so the output should be a prompt that directs the AI to generate code that exactly matches the correct code's functionality. Also, the output must not include any explanations\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.", "output": "As an AI code generation expert, your task is to generate a Python function that takes a list of tasks, each represented as a tuple `(start, end)`, and returns the maximum number of non-overlapping tasks that can be selected. The tasks are sorted by their start times. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other. The generated code should be correct, efficient, and follow best practices for readability and maintainability. Ensure that the code is production-ready and adheres to Python coding standards."}], "c_model": {"input": "你是专业代码评判模型（C模型），需要对生成代码和其对应的提示词进行评分。请严格按照以下规则评估：\n\n【评估对象】\n- 提示词（A模型输出）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided. \n\nThe system prompt should mirror the structure of the examples. It needs to emphasize producing high-quality, production-ready code, focusing on correctness, readability, performance, and best practices. Also, it must mention analyzing the problem, choosing appropriate algorithms, and ensuring the code is clean and maintainable.\n\nI should make sure to include the specific tokens mentioned in the rules, like \"task\", \"Sample\", etc., but in this case, the input doesn't have a sample. Wait, the third example had a sample input and output. The current input here doesn't have a sample, so maybe I don't need to include that part. \n\nThe correct code is given, so the output should be a prompt that directs the AI to generate code that exactly matches the correct code's functionality. Also, the output must not include any explanations\n- B模型输入（合并提示词）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided. \n\nThe system prompt should mirror the structure of the examples. It needs to emphasize producing high-quality, production-ready code, focusing on correctness, readability, performance, and best practices. Also, it must mention analyzing the problem, choosing appropriate algorithms, and ensuring the code is clean and maintainable.\n\nI should make sure to include the specific tokens mentioned in the rules, like \"task\", \"Sample\", etc., but in this case, the input doesn't have a sample. Wait, the third example had a sample input and output. The current input here doesn't have a sample, so maybe I don't need to include that part. \n\nThe correct code is given, so the output should be a prompt that directs the AI to generate code that exactly matches the correct code's functionality. Also, the output must not include any explanations\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\n- 生成代码（B模型输出）：As an AI code generation expert, your task is to write a function that takes a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\n\nEnsure that the code is correct, efficient, and follows best practices for readability and maintainability. Use appropriate algorithms and data structures to solve the problem. The function should be named `maxNonOverlappingTasks` and should return an integer representing the maximum number of non-overlapping tasks.\n\n```python\ndef maxNonOverlappingTasks(tasks):\n    if not tasks:\n        return 0\n\n    count = 0\n    end_time = float('-inf')\n\n    for task in tasks:\n        if task[0] >= end_time:\n            count += 1\n            end_time = task[1]\n\n    return count\n```\n- 代码真值（参考标准）：```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```\n\n【评估维度及权重】\n1. 符合提示词度（30%）：生成代码是否严格遵循B模型输入的要求（功能、格式、约束等）\n2. 代码质量（30%）：代码内容语法正确性、逻辑完整性、可读性（命名规范、注释等）\n3. 功能一致性（40%）：与真值代码的核心功能是否一致（输入输出、处理逻辑）\n4. 模型生成代码含有自然语言内容，在总分基础上扣两分。\n\n【评分规则】\n- 总分：-10 ~ +10（分数越高表示提示词效果越好，A模型应被奖励）\n  - +7~+10：优秀（完全符合B模型输入，代码质量高，功能一致）\n  - +3~+6：良好（基本符合B模型输入，少量问题，功能基本一致）\n  - -2~+2：一般（部分符合B模型输入，有明显问题，功能有偏差）\n  - -6~-3：较差（很少符合B模型输入，严重问题，功能偏差大）\n  - -10~-7：极差（完全不符合B模型输入，无法运行，功能错误）\n- 必须给出具体扣分/加分理由，禁止模糊评价\n\n【输出格式】（严格按照JSON格式输出，键名不可修改）\n{\n  \"total_score\": 具体分数（整数）,\n  \"match_prompt\": 布尔值（true/false，是否符合B模型输入）,\n  \"score_details\": {\n    \"prompt_match_score\": 维度1得分（-4~+4）,\n    \"code_quality_score\": 维度2得分（-3~+3）,\n    \"function_consistency_score\": 维度3得分（-3~+3）\n  },\n  \"reason\": \"具体评价理由（分点说明）\"\n}", "output": [{"total_score": -3, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": 1, "function_consistency_score": -3}, "reason": "1. 提示词未正确生成，直接复制了用户输入内容，未按照示例格式生成系统提示词，导致B模型输入无效，严重偏离任务要求（扣4分）。\n2. 生成的代码语法正确，命名基本规范，但缺少必要的文档字符串和注释，可读性一般（加1分）。\n3. 功能与真值代码不一致：生成代码中初始count为0，且第一个任务不会被选中，导致结果偏小1；而真值代码初始count为1并选择第一个任务，逻辑不一致（扣3分）。\n4. 生成代码中未使用与真值一致的变量命名（如`last_end` vs `end_time`），虽然不影响功能，但降低了可读性和一致性。\n5. 模型输出中包含自然语言解释内容，违反规则，在总分基础上再扣2分（已体现在总分中）。", "model_output_contains_natural_language": true}, {"total_score": -10, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": -3, "function_consistency_score": -3}, "reason": "1. 提示词未正确生成，未按照要求输出系统提示词，而是重复了用户输入内容，导致B模型无法据此生成代码。\n2. 生成代码部分缺失，实际输出仅为一段提示词描述而非可执行代码，无法评估代码质量。\n3. 由于没有实际代码输出，功能一致性严重缺失，无法实现与真值代码的对比。\n4. 未生成可运行代码，违反评分规则第2条，直接负分。\n5. 输出中包含大量自然语言解释，违反规则，在总分基础上额外扣分。"}], "avg_score": -6.5}}
{"timestamp": "2025-11-26T17:24:31.961371", "sample_id": 2, "iteration": 0, "a_model": {"input": "<|im_start|>user\nI will provide you with some examples of generating system prompts. Please carefully study and understand the content and structure of these examples.\n\nExamples:\n【示例1】\nInput:\n\"Original prompt:You are given a YAML file generated by OpenCV, which may contain commented lines that interfere with parsing using PyYAML. Your task is to implement a function `clean_opencv_yaml` that reads the file, removes all commented lines, and returns the cleaned YAML content as a string. The function should handle nested comments and maintain proper YAML formatting, even within sequences or mappings. The function should accept the file path as input and return the cleaned YAML content as a string. If the file format is not recognized as an OpenCV-generated YAML file, the function should raise a `ValueError`.\\n\\n**Sample Input:**\\n```\\n%YAML:1.0\\n# This is a comment\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  # This is another comment\\n  channels: 3\\n# End of file\\n```\\n\\n**Sample Output:**\\n```\\n%YAML:1.0\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  channels: 3\\n```\n\"Correct code:```python\\nimport re\\n\\ndef clean_opencv_yaml(file_path):\\n    \\\"\\\"\\\"\\n    Read an OpenCV-written YAML file, remove commented lines, and return the cleaned content.\\n\\n    :param file_path: Path to the YAML file.\\n    :return: Cleaned YAML content as a string.\\n    :raises ValueError: If the file format is not supported.\\n    :raises FileNotFoundError: If the file does not exist.\\n    \\\"\\\"\\\"\\n    try:\\n        with open(file_path, 'r') as file:\\n            content = file.readlines()\\n    except FileNotFoundError:\\n        raise FileNotFoundError(f\\\"The file at {file_path} was not found.\\\")\\n\\n    cleaned_lines = []\\n    in_mapping = False\\n\\n    for line in content:\\n        stripped_line = line.strip()\\n\\n        if stripped_line.startswith('%YAML'):\\n            in_mapping = True\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping and stripped_line == '---':\\n            in_mapping = False\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping:\\n            if not stripped_line.startswith('%') and stripped_line:\\n                cleaned_lines.append(line)\\n            elif re.match(r'^\\\\s*-|^\\\\s*\\\\w+:', stripped_line) or not stripped_line:\\n                cleaned_lines.append(line)\\n        elif stripped_line.startswith('%'):\\n            continue\\n\\n        else:\\n            cleaned_lines.append(line)\\n\\n    if not in_mapping:\\n        raise ValueError(\\\"Unsupported file format: The file does not appear to be an OpenCV written YAML file.\\\")\\n\\n    return ''.join(cleaned_lines)\\n\\n# Example usage:\\n# cleaned_yaml = clean_opencv_yaml('path\\/to\\/opencv_yaml.yaml')\\n# print(cleaned_yaml)\\n```\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \n. You must meticulously analyze the given problem, choose appropriate algorithms and data structures for efficiency, and ensure the implementation is clean, well-structured, and easy to maintain \n. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\nno netural language!\n\n【示例2】\nInput:\n\"Original prompt:You are given an array of integers `digits` and an integer `n`. Your task is to compute the sum of the products of every `n` consecutive digits in the array, but only include those products that are prime numbers. If `n` is greater than the length of the array, return 0.\\n\n\"Correct code:```python\\ndef is_prime(num):\\n    \\\"\\\"\\\"Check if a number is prime.\\\"\\\"\\\"\\n    if num <= 1:\\n        return False\\n    if num <= 3:\\n        return True\\n    if num % 2 == 0 or num % 3 == 0:\\n        return False\\n    i = 5\\n    while i * i <= num:\\n        if num % i == 0 or num % (i + 2) == 0:\\n            return False\\n        i += 6\\n    return True\\n\\ndef sum_of_products(digits, n):\\n    \\\"\\\"\\\"Compute the sum of the products of every n consecutive digits in the array,\\n    considering only those sequences whose product is a prime number.\\\"\\\"\\\"\\n    if n > len(digits):\\n        return 0\\n    \\n    total_sum = 0\\n    for i in range(len(digits) - n + 1):\\n        product = 1\\n        for j in range(n):\\n            product *= digits[i + j]\\n        if is_prime(product):\\n            total_sum += product\\n    return total_sum\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \npay attention to the tokes： integer,python,code\n\n【示例3】\nInput:\n\"Original prompt:You are given a string `units` consisting of uppercase and lowercase English letters. Each character in the string represents a chemical unit. Two units can react with each other if one is the lowercase version of the other or vice versa. When two units react, they are removed from the string.\\n\\nYour task is to write a function that processes the string `units` and returns a new string where all possible reactions have occurred. The function should continue reacting units until no more reactions are possible. After performing the reactions, sort the remaining units in ascending order, maintaining the original case for each unit. The sorting should be case-insensitive.\\n\n\"Correct code:\"```python\\ndef react_and_sort_units(units: str) -> str:\\n    \\\"\\\"\\\"\\n    Processes a string of chemical units, removing reacting pairs and sorting the remaining units.\\n    \\n    :param units: A string of chemical units consisting of uppercase and lowercase English letters.\\n    :return: A string of the remaining units after reactions and sorting.\\n    \\\"\\\"\\\"\\n    def can_react(unit1: str, unit2: str) -> bool:\\n        return unit1 != unit2 and unit1.lower() == unit2.lower()\\n\\n    stack = []\\n    \\n    for unit in units:\\n        if stack and can_react(stack[-1], unit):\\n            stack.pop()\\n        else:\\n            stack.append(unit)\\n\\n    sorted_units = sorted(stack, key=lambda x: x.lower())\\n    \\n    return ''.join(sorted_units)\\n\\n# Example usage:\\ninput_units = \\\"AaBb\\\"\\nresult = react_and_sort_units(input_units)\\nprint(result)  # Output should be \\\"Bb\\\"\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. you must have no netural language! \nplease pay attention to the tokes：units,task,Sample and so on\n\nBased on the examples above, generate an English system prompt for the following input (follow the same format as examples),IMPORTANT RULES:\nOutput ONLY the final system prompt, with NO intermediate thinking, explanations, or reasoning.\nDo NOT include phrases like 'Let me think', 'First, I need to', or any similar thought process.\nIt is not allowed to output any thinking and explanatory statements, only the generated system prompts:\n【Input】\nOriginal prompt: You are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\nCorrect code: ```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```\n【model_Output】\n<|im_end|>\n<|im_start|>assistant\n", "output": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided.\n\nI need to make sure the system prompt is in English, concise, and without any extra explanations. The main points to include are the problem statement, the correct code, and the requirements for the output. The examples also mention focusing on readability, performance, and best practices. \n\nWait, the user's input includes the original prompt, correct code, and the model's output. The task is to generate the system prompt that would lead to the correct code. The system prompt should instruct the AI to produce code that's functional, readable, efficient, and follows best practices. Also, the output should be precise and not include any extra text.\n\nLooking at the examples, the system prompts start with \"As an AI code generation expert...\" and then specify the goals. They mention analyzing the problem, choosing appropriate algorithms, ensuring the code is"}, "b_model": [{"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided.\n\nI need to make sure the system prompt is in English, concise, and without any extra explanations. The main points to include are the problem statement, the correct code, and the requirements for the output. The examples also mention focusing on readability, performance, and best practices. \n\nWait, the user's input includes the original prompt, correct code, and the model's output. The task is to generate the system prompt that would lead to the correct code. The system prompt should instruct the AI to produce code that's functional, readable, efficient, and follows best practices. Also, the output should be precise and not include any extra text.\n\nLooking at the examples, the system prompts start with \"As an AI code generation expert...\" and then specify the goals. They mention analyzing the problem, choosing appropriate algorithms, ensuring the code is\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.", "output": "As an AI code generation expert, your task is to generate a Python function that determines the maximum number of non-overlapping tasks that can be selected from a list of tasks. Each task is represented as a tuple `(start, end)`, and the tasks are sorted by their start times. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other. \n\nThe function should:\n- Be functional, readable, and efficient.\n- Follow best practices in Python programming.\n- Return the maximum number of non-overlapping tasks.\n\nHere is the correct code for reference:\n```python\ndef max_non_overlapping_tasks(tasks):\n    if not tasks:\n        return 0\n\n    count = 1\n    end_time = tasks[0][1]\n    for i in range(1, len(tasks)):\n        if tasks[i][0] >= end_time:\n            count += 1\n            end_time = tasks[i][1]\n    return count\n```\n\nYour output should be the Python function that meets the above criteria, without any additional text or explanations."}, {"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided.\n\nI need to make sure the system prompt is in English, concise, and without any extra explanations. The main points to include are the problem statement, the correct code, and the requirements for the output. The examples also mention focusing on readability, performance, and best practices. \n\nWait, the user's input includes the original prompt, correct code, and the model's output. The task is to generate the system prompt that would lead to the correct code. The system prompt should instruct the AI to produce code that's functional, readable, efficient, and follows best practices. Also, the output should be precise and not include any extra text.\n\nLooking at the examples, the system prompts start with \"As an AI code generation expert...\" and then specify the goals. They mention analyzing the problem, choosing appropriate algorithms, ensuring the code is\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.", "output": "As an AI code generation expert, you are tasked with generating a Python function that solves the problem of scheduling non-overlapping tasks. The function should take a list of tasks, each represented as a tuple `(start, end)`, and return the maximum number of non-overlapping tasks that can be selected. The tasks are already sorted by their start times. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\n\nThe correct code to achieve this is as follows:\n\n```python\ndef max_non_overlapping_tasks(tasks):\n    if not tasks:\n        return 0\n\n    count = 0\n    current_end = float('-inf')\n\n    for start, end in tasks:\n        if start >= current_end:\n            count += 1\n            current_end = end\n\n    return count\n```\n\nYour task is to generate a system prompt that will instruct the AI to produce this code. The system prompt should ensure that the generated code is:\n- Functional and correct\n- Readable and well-structured\n- Efficient in terms of performance\n- Follows best practices in Python programming\n\nThe output should be precise and should not include any extra text or explanations."}], "c_model": {"input": "你是专业代码评判模型（C模型），需要对生成代码和其对应的提示词进行评分。请严格按照以下规则评估：\n\n【评估对象】\n- 提示词（A模型输出）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided.\n\nI need to make sure the system prompt is in English, concise, and without any extra explanations. The main points to include are the problem statement, the correct code, and the requirements for the output. The examples also mention focusing on readability, performance, and best practices. \n\nWait, the user's input includes the original prompt, correct code, and the model's output. The task is to generate the system prompt that would lead to the correct code. The system prompt should instruct the AI to produce code that's functional, readable, efficient, and follows best practices. Also, the output should be precise and not include any extra text.\n\nLooking at the examples, the system prompts start with \"As an AI code generation expert...\" and then specify the goals. They mention analyzing the problem, choosing appropriate algorithms, ensuring the code is\n- B模型输入（合并提示词）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then follows with specific instructions. The key elements are the task description, the correct code, and the output format. The user's input here is about scheduling non-overlapping tasks, and the correct code is provided.\n\nI need to make sure the system prompt is in English, concise, and without any extra explanations. The main points to include are the problem statement, the correct code, and the requirements for the output. The examples also mention focusing on readability, performance, and best practices. \n\nWait, the user's input includes the original prompt, correct code, and the model's output. The task is to generate the system prompt that would lead to the correct code. The system prompt should instruct the AI to produce code that's functional, readable, efficient, and follows best practices. Also, the output should be precise and not include any extra text.\n\nLooking at the examples, the system prompts start with \"As an AI code generation expert...\" and then specify the goals. They mention analyzing the problem, choosing appropriate algorithms, ensuring the code is\nYou are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.\n- 生成代码（B模型输出）：As an AI code generation expert, your task is to generate a Python function that determines the maximum number of non-overlapping tasks that can be selected from a list of tasks. Each task is represented as a tuple `(start, end)`, and the tasks are sorted by their start times. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other. \n\nThe function should:\n- Be functional, readable, and efficient.\n- Follow best practices in Python programming.\n- Return the maximum number of non-overlapping tasks.\n\nHere is the correct code for reference:\n```python\ndef max_non_overlapping_tasks(tasks):\n    if not tasks:\n        return 0\n\n    count = 1\n    end_time = tasks[0][1]\n    for i in range(1, len(tasks)):\n        if tasks[i][0] >= end_time:\n            count += 1\n            end_time = tasks[i][1]\n    return count\n```\n\nYour output should be the Python function that meets the above criteria, without any additional text or explanations.\n- 代码真值（参考标准）：```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```\n\n【评估维度及权重】\n1. 符合提示词度（30%）：生成代码是否严格遵循B模型输入的要求（功能、格式、约束等）\n2. 代码质量（30%）：代码内容语法正确性、逻辑完整性、可读性（命名规范、注释等）\n3. 功能一致性（40%）：与真值代码的核心功能是否一致（输入输出、处理逻辑）\n4. 模型生成代码含有自然语言内容，在总分基础上扣两分。\n\n【评分规则】\n- 总分：-10 ~ +10（分数越高表示提示词效果越好，A模型应被奖励）\n  - +7~+10：优秀（完全符合B模型输入，代码质量高，功能一致）\n  - +3~+6：良好（基本符合B模型输入，少量问题，功能基本一致）\n  - -2~+2：一般（部分符合B模型输入，有明显问题，功能有偏差）\n  - -6~-3：较差（很少符合B模型输入，严重问题，功能偏差大）\n  - -10~-7：极差（完全不符合B模型输入，无法运行，功能错误）\n- 必须给出具体扣分/加分理由，禁止模糊评价\n\n【输出格式】（严格按照JSON格式输出，键名不可修改）\n{\n  \"total_score\": 具体分数（整数）,\n  \"match_prompt\": 布尔值（true/false，是否符合B模型输入）,\n  \"score_details\": {\n    \"prompt_match_score\": 维度1得分（-4~+4）,\n    \"code_quality_score\": 维度2得分（-3~+3）,\n    \"function_consistency_score\": 维度3得分（-3~+3）\n  },\n  \"reason\": \"具体评价理由（分点说明）\"\n}", "output": [{"total_score": 8, "match_prompt": true, "score_details": {"prompt_match_score": 4, "code_quality_score": 3, "function_consistency_score": 3}, "reason": ["生成代码完全符合B模型输入的要求：实现了最大非重叠任务数的计算，输入为任务列表，输出为整数，符合功能与格式要求（+4）。", "代码质量高：语法正确，逻辑完整，命名清晰（如`count`、`end_time`），结构简洁，符合Python最佳实践（+3）。", "功能与真值代码完全一致：使用贪心策略，按开始时间排序后选择最早结束的任务，逻辑与真值一致，输出结果一致（+3）。", "生成代码中未包含任何自然语言解释，符合输出格式要求，未触发扣分项。"]}, {"total_score": -3, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": 1, "function_consistency_score": -2}, "reason": ["维度1（符合提示词度）扣-4分：B模型输出未生成代码，而是输出了一段系统提示文本，完全不符合B模型输入要求生成实际的Python代码。", "维度2（代码质量）得1分：由于B模型输出中未包含实际代码，无法评估语法、逻辑、可读性等，仅因未出现语法错误等严重问题给予最低正分。", "维度3（功能一致性）扣-2分：由于没有实际代码生成，无法与真值代码进行功能对比，因此功能一致性严重缺失。", "额外扣分：B模型输出中包含自然语言内容（系统提示文本），根据规则在总分基础上再扣2分。"]}], "avg_score": 2.5}}
{"timestamp": "2025-11-26T17:25:04.005938", "sample_id": 3, "iteration": 0, "a_model": {"input": "<|im_start|>user\nI will provide you with some examples of generating system prompts. Please carefully study and understand the content and structure of these examples.\n\nExamples:\n【示例1】\nInput:\n\"Original prompt:You are given a YAML file generated by OpenCV, which may contain commented lines that interfere with parsing using PyYAML. Your task is to implement a function `clean_opencv_yaml` that reads the file, removes all commented lines, and returns the cleaned YAML content as a string. The function should handle nested comments and maintain proper YAML formatting, even within sequences or mappings. The function should accept the file path as input and return the cleaned YAML content as a string. If the file format is not recognized as an OpenCV-generated YAML file, the function should raise a `ValueError`.\\n\\n**Sample Input:**\\n```\\n%YAML:1.0\\n# This is a comment\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  # This is another comment\\n  channels: 3\\n# End of file\\n```\\n\\n**Sample Output:**\\n```\\n%YAML:1.0\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  channels: 3\\n```\n\"Correct code:```python\\nimport re\\n\\ndef clean_opencv_yaml(file_path):\\n    \\\"\\\"\\\"\\n    Read an OpenCV-written YAML file, remove commented lines, and return the cleaned content.\\n\\n    :param file_path: Path to the YAML file.\\n    :return: Cleaned YAML content as a string.\\n    :raises ValueError: If the file format is not supported.\\n    :raises FileNotFoundError: If the file does not exist.\\n    \\\"\\\"\\\"\\n    try:\\n        with open(file_path, 'r') as file:\\n            content = file.readlines()\\n    except FileNotFoundError:\\n        raise FileNotFoundError(f\\\"The file at {file_path} was not found.\\\")\\n\\n    cleaned_lines = []\\n    in_mapping = False\\n\\n    for line in content:\\n        stripped_line = line.strip()\\n\\n        if stripped_line.startswith('%YAML'):\\n            in_mapping = True\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping and stripped_line == '---':\\n            in_mapping = False\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping:\\n            if not stripped_line.startswith('%') and stripped_line:\\n                cleaned_lines.append(line)\\n            elif re.match(r'^\\\\s*-|^\\\\s*\\\\w+:', stripped_line) or not stripped_line:\\n                cleaned_lines.append(line)\\n        elif stripped_line.startswith('%'):\\n            continue\\n\\n        else:\\n            cleaned_lines.append(line)\\n\\n    if not in_mapping:\\n        raise ValueError(\\\"Unsupported file format: The file does not appear to be an OpenCV written YAML file.\\\")\\n\\n    return ''.join(cleaned_lines)\\n\\n# Example usage:\\n# cleaned_yaml = clean_opencv_yaml('path\\/to\\/opencv_yaml.yaml')\\n# print(cleaned_yaml)\\n```\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \n. You must meticulously analyze the given problem, choose appropriate algorithms and data structures for efficiency, and ensure the implementation is clean, well-structured, and easy to maintain \n. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\nno netural language!\n\n【示例2】\nInput:\n\"Original prompt:You are given an array of integers `digits` and an integer `n`. Your task is to compute the sum of the products of every `n` consecutive digits in the array, but only include those products that are prime numbers. If `n` is greater than the length of the array, return 0.\\n\n\"Correct code:```python\\ndef is_prime(num):\\n    \\\"\\\"\\\"Check if a number is prime.\\\"\\\"\\\"\\n    if num <= 1:\\n        return False\\n    if num <= 3:\\n        return True\\n    if num % 2 == 0 or num % 3 == 0:\\n        return False\\n    i = 5\\n    while i * i <= num:\\n        if num % i == 0 or num % (i + 2) == 0:\\n            return False\\n        i += 6\\n    return True\\n\\ndef sum_of_products(digits, n):\\n    \\\"\\\"\\\"Compute the sum of the products of every n consecutive digits in the array,\\n    considering only those sequences whose product is a prime number.\\\"\\\"\\\"\\n    if n > len(digits):\\n        return 0\\n    \\n    total_sum = 0\\n    for i in range(len(digits) - n + 1):\\n        product = 1\\n        for j in range(n):\\n            product *= digits[i + j]\\n        if is_prime(product):\\n            total_sum += product\\n    return total_sum\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \npay attention to the tokes： integer,python,code\n\n【示例3】\nInput:\n\"Original prompt:You are given a string `units` consisting of uppercase and lowercase English letters. Each character in the string represents a chemical unit. Two units can react with each other if one is the lowercase version of the other or vice versa. When two units react, they are removed from the string.\\n\\nYour task is to write a function that processes the string `units` and returns a new string where all possible reactions have occurred. The function should continue reacting units until no more reactions are possible. After performing the reactions, sort the remaining units in ascending order, maintaining the original case for each unit. The sorting should be case-insensitive.\\n\n\"Correct code:\"```python\\ndef react_and_sort_units(units: str) -> str:\\n    \\\"\\\"\\\"\\n    Processes a string of chemical units, removing reacting pairs and sorting the remaining units.\\n    \\n    :param units: A string of chemical units consisting of uppercase and lowercase English letters.\\n    :return: A string of the remaining units after reactions and sorting.\\n    \\\"\\\"\\\"\\n    def can_react(unit1: str, unit2: str) -> bool:\\n        return unit1 != unit2 and unit1.lower() == unit2.lower()\\n\\n    stack = []\\n    \\n    for unit in units:\\n        if stack and can_react(stack[-1], unit):\\n            stack.pop()\\n        else:\\n            stack.append(unit)\\n\\n    sorted_units = sorted(stack, key=lambda x: x.lower())\\n    \\n    return ''.join(sorted_units)\\n\\n# Example usage:\\ninput_units = \\\"AaBb\\\"\\nresult = react_and_sort_units(input_units)\\nprint(result)  # Output should be \\\"Bb\\\"\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. you must have no netural language! \nplease pay attention to the tokes：units,task,Sample and so on\n\nBased on the examples above, generate an English system prompt for the following input (follow the same format as examples),IMPORTANT RULES:\nOutput ONLY the final system prompt, with NO intermediate thinking, explanations, or reasoning.\nDo NOT include phrases like 'Let me think', 'First, I need to', or any similar thought process.\nIt is not allowed to output any thinking and explanatory statements, only the generated system prompts:\n【Input】\nOriginal prompt: You are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.\nCorrect code: ```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```\n【model_Output】\n<|im_end|>\n<|im_start|>assistant\n", "output": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering correct nesting.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), the focus on correctness, efficiency, and adherence to best practices. Also, the examples include phrases like \"handle edge cases,\" \"optimize for performance,\" and \"clean, well-structured code.\"\n\nI should avoid any unnecessary explanations and stick strictly to the structure of the examples. The output must not include any natural language, just the system prompt. Let me check the tokens mentioned in the examples: \"task\", \"Sample\", \"units\", etc. Here, the key terms would be \"bracket\", \"balanced\","}, "b_model": [{"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering correct nesting.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), the focus on correctness, efficiency, and adherence to best practices. Also, the examples include phrases like \"handle edge cases,\" \"optimize for performance,\" and \"clean, well-structured code.\"\n\nI should avoid any unnecessary explanations and stick strictly to the structure of the examples. The output must not include any natural language, just the system prompt. Let me check the tokens mentioned in the examples: \"task\", \"Sample\", \"units\", etc. Here, the key terms would be \"bracket\", \"balanced\",\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.", "output": "As an AI code generation expert, you are tasked with writing a Python function to determine if the brackets in a given string `expression` are balanced. The function should handle parentheses `()`, square brackets `[]`, and curly braces `{}`. Ensure the function is correct, efficient, and adheres to best practices. Focus on producing clean, well-structured code that is easy to read and maintain. Optimize for performance and handle edge cases appropriately."}, {"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering correct nesting.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), the focus on correctness, efficiency, and adherence to best practices. Also, the examples include phrases like \"handle edge cases,\" \"optimize for performance,\" and \"clean, well-structured code.\"\n\nI should avoid any unnecessary explanations and stick strictly to the structure of the examples. The output must not include any natural language, just the system prompt. Let me check the tokens mentioned in the examples: \"task\", \"Sample\", \"units\", etc. Here, the key terms would be \"bracket\", \"balanced\",\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.", "output": "As an AI code generation expert, my task is to produce a Python function that determines if the brackets in a given string are balanced. The function should handle parentheses `()`, square brackets `[]`, and curly braces `{}`. The code must be correct, efficient, and adhere to best practices, including handling edge cases, optimizing for performance, and ensuring clean, well-structured code."}], "c_model": {"input": "你是专业代码评判模型（C模型），需要对生成代码和其对应的提示词进行评分。请严格按照以下规则评估：\n\n【评估对象】\n- 提示词（A模型输出）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering correct nesting.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), the focus on correctness, efficiency, and adherence to best practices. Also, the examples include phrases like \"handle edge cases,\" \"optimize for performance,\" and \"clean, well-structured code.\"\n\nI should avoid any unnecessary explanations and stick strictly to the structure of the examples. The output must not include any natural language, just the system prompt. Let me check the tokens mentioned in the examples: \"task\", \"Sample\", \"units\", etc. Here, the key terms would be \"bracket\", \"balanced\",\n- B模型输入（合并提示词）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering correct nesting.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), the focus on correctness, efficiency, and adherence to best practices. Also, the examples include phrases like \"handle edge cases,\" \"optimize for performance,\" and \"clean, well-structured code.\"\n\nI should avoid any unnecessary explanations and stick strictly to the structure of the examples. The output must not include any natural language, just the system prompt. Let me check the tokens mentioned in the examples: \"task\", \"Sample\", \"units\", etc. Here, the key terms would be \"bracket\", \"balanced\",\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.\n- 生成代码（B模型输出）：As an AI code generation expert, you are tasked with writing a Python function to determine if the brackets in a given string `expression` are balanced. The function should handle parentheses `()`, square brackets `[]`, and curly braces `{}`. Ensure the function is correct, efficient, and adheres to best practices. Focus on producing clean, well-structured code that is easy to read and maintain. Optimize for performance and handle edge cases appropriately.\n- 代码真值（参考标准）：```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```\n\n【评估维度及权重】\n1. 符合提示词度（30%）：生成代码是否严格遵循B模型输入的要求（功能、格式、约束等）\n2. 代码质量（30%）：代码内容语法正确性、逻辑完整性、可读性（命名规范、注释等）\n3. 功能一致性（40%）：与真值代码的核心功能是否一致（输入输出、处理逻辑）\n4. 模型生成代码含有自然语言内容，在总分基础上扣两分。\n\n【评分规则】\n- 总分：-10 ~ +10（分数越高表示提示词效果越好，A模型应被奖励）\n  - +7~+10：优秀（完全符合B模型输入，代码质量高，功能一致）\n  - +3~+6：良好（基本符合B模型输入，少量问题，功能基本一致）\n  - -2~+2：一般（部分符合B模型输入，有明显问题，功能有偏差）\n  - -6~-3：较差（很少符合B模型输入，严重问题，功能偏差大）\n  - -10~-7：极差（完全不符合B模型输入，无法运行，功能错误）\n- 必须给出具体扣分/加分理由，禁止模糊评价\n\n【输出格式】（严格按照JSON格式输出，键名不可修改）\n{\n  \"total_score\": 具体分数（整数）,\n  \"match_prompt\": 布尔值（true/false，是否符合B模型输入）,\n  \"score_details\": {\n    \"prompt_match_score\": 维度1得分（-4~+4）,\n    \"code_quality_score\": 维度2得分（-3~+3）,\n    \"function_consistency_score\": 维度3得分（-3~+3）\n  },\n  \"reason\": \"具体评价理由（分点说明）\"\n}", "output": [{"total_score": -10, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": -3, "function_consistency_score": -3}, "reason": "1. 生成内容完全不符合B模型输入要求，输出的是提示词而非代码，严重违反了B模型输入中明确要求生成代码的指令。\n2. 代码质量维度得负分，因为未生成任何可执行代码，无法评估语法正确性、逻辑完整性或可读性。\n3. 功能一致性维度得负分，因为没有生成实际代码，无法实现与真值代码相同的功能。\n4. 模型输出中包含自然语言内容，按照规则在总分基础上额外扣2分。"}, {"total_score": -10, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": -3, "function_consistency_score": -3}, "reason": "1. 生成内容未包含实际代码，仅输出了一段自然语言描述，完全不符合B模型输入要求的功能和格式约束，提示词未引导生成可执行代码，维度1扣满。\n2. 未生成任何可评估的代码内容，语法、逻辑、可读性等方面完全缺失，维度2扣满。\n3. 由于没有实际代码实现，与真值代码在功能逻辑上完全不一致，维度3扣满。\n4. 模型输出为自然语言而非代码，根据规则在总分基础上再扣2分，最终得分为最低分-10。"}], "avg_score": -10.0}}
{"timestamp": "2025-11-26T17:25:17.210213", "sample_id": 4, "iteration": 0, "a_model": {"input": "<|im_start|>user\nI will provide you with some examples of generating system prompts. Please carefully study and understand the content and structure of these examples.\n\nExamples:\n【示例1】\nInput:\n\"Original prompt:You are given a YAML file generated by OpenCV, which may contain commented lines that interfere with parsing using PyYAML. Your task is to implement a function `clean_opencv_yaml` that reads the file, removes all commented lines, and returns the cleaned YAML content as a string. The function should handle nested comments and maintain proper YAML formatting, even within sequences or mappings. The function should accept the file path as input and return the cleaned YAML content as a string. If the file format is not recognized as an OpenCV-generated YAML file, the function should raise a `ValueError`.\\n\\n**Sample Input:**\\n```\\n%YAML:1.0\\n# This is a comment\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  # This is another comment\\n  channels: 3\\n# End of file\\n```\\n\\n**Sample Output:**\\n```\\n%YAML:1.0\\n---\\nimage:\\n  width: 640\\n  height: 480\\n  channels: 3\\n```\n\"Correct code:```python\\nimport re\\n\\ndef clean_opencv_yaml(file_path):\\n    \\\"\\\"\\\"\\n    Read an OpenCV-written YAML file, remove commented lines, and return the cleaned content.\\n\\n    :param file_path: Path to the YAML file.\\n    :return: Cleaned YAML content as a string.\\n    :raises ValueError: If the file format is not supported.\\n    :raises FileNotFoundError: If the file does not exist.\\n    \\\"\\\"\\\"\\n    try:\\n        with open(file_path, 'r') as file:\\n            content = file.readlines()\\n    except FileNotFoundError:\\n        raise FileNotFoundError(f\\\"The file at {file_path} was not found.\\\")\\n\\n    cleaned_lines = []\\n    in_mapping = False\\n\\n    for line in content:\\n        stripped_line = line.strip()\\n\\n        if stripped_line.startswith('%YAML'):\\n            in_mapping = True\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping and stripped_line == '---':\\n            in_mapping = False\\n            cleaned_lines.append(line)\\n            continue\\n\\n        if in_mapping:\\n            if not stripped_line.startswith('%') and stripped_line:\\n                cleaned_lines.append(line)\\n            elif re.match(r'^\\\\s*-|^\\\\s*\\\\w+:', stripped_line) or not stripped_line:\\n                cleaned_lines.append(line)\\n        elif stripped_line.startswith('%'):\\n            continue\\n\\n        else:\\n            cleaned_lines.append(line)\\n\\n    if not in_mapping:\\n        raise ValueError(\\\"Unsupported file format: The file does not appear to be an OpenCV written YAML file.\\\")\\n\\n    return ''.join(cleaned_lines)\\n\\n# Example usage:\\n# cleaned_yaml = clean_opencv_yaml('path\\/to\\/opencv_yaml.yaml')\\n# print(cleaned_yaml)\\n```\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \n. You must meticulously analyze the given problem, choose appropriate algorithms and data structures for efficiency, and ensure the implementation is clean, well-structured, and easy to maintain \n. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\nno netural language!\n\n【示例2】\nInput:\n\"Original prompt:You are given an array of integers `digits` and an integer `n`. Your task is to compute the sum of the products of every `n` consecutive digits in the array, but only include those products that are prime numbers. If `n` is greater than the length of the array, return 0.\\n\n\"Correct code:```python\\ndef is_prime(num):\\n    \\\"\\\"\\\"Check if a number is prime.\\\"\\\"\\\"\\n    if num <= 1:\\n        return False\\n    if num <= 3:\\n        return True\\n    if num % 2 == 0 or num % 3 == 0:\\n        return False\\n    i = 5\\n    while i * i <= num:\\n        if num % i == 0 or num % (i + 2) == 0:\\n            return False\\n        i += 6\\n    return True\\n\\ndef sum_of_products(digits, n):\\n    \\\"\\\"\\\"Compute the sum of the products of every n consecutive digits in the array,\\n    considering only those sequences whose product is a prime number.\\\"\\\"\\\"\\n    if n > len(digits):\\n        return 0\\n    \\n    total_sum = 0\\n    for i in range(len(digits) - n + 1):\\n        product = 1\\n        for j in range(n):\\n            product *= digits[i + j]\\n        if is_prime(product):\\n            total_sum += product\\n    return total_sum\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices \npay attention to the tokes： integer,python,code\n\n【示例3】\nInput:\n\"Original prompt:You are given a string `units` consisting of uppercase and lowercase English letters. Each character in the string represents a chemical unit. Two units can react with each other if one is the lowercase version of the other or vice versa. When two units react, they are removed from the string.\\n\\nYour task is to write a function that processes the string `units` and returns a new string where all possible reactions have occurred. The function should continue reacting units until no more reactions are possible. After performing the reactions, sort the remaining units in ascending order, maintaining the original case for each unit. The sorting should be case-insensitive.\\n\n\"Correct code:\"```python\\ndef react_and_sort_units(units: str) -> str:\\n    \\\"\\\"\\\"\\n    Processes a string of chemical units, removing reacting pairs and sorting the remaining units.\\n    \\n    :param units: A string of chemical units consisting of uppercase and lowercase English letters.\\n    :return: A string of the remaining units after reactions and sorting.\\n    \\\"\\\"\\\"\\n    def can_react(unit1: str, unit2: str) -> bool:\\n        return unit1 != unit2 and unit1.lower() == unit2.lower()\\n\\n    stack = []\\n    \\n    for unit in units:\\n        if stack and can_react(stack[-1], unit):\\n            stack.pop()\\n        else:\\n            stack.append(unit)\\n\\n    sorted_units = sorted(stack, key=lambda x: x.lower())\\n    \\n    return ''.join(sorted_units)\\n\\n# Example usage:\\ninput_units = \\\"AaBb\\\"\\nresult = react_and_sort_units(input_units)\\nprint(result)  # Output should be \\\"Bb\\\"\\n```\"\n\nOutput:\nAs an AI code generation expert, you are tasked with producing high-quality, production-ready code based on user requirements. you must have no netural language! \nplease pay attention to the tokes：units,task,Sample and so on\n\nBased on the examples above, generate an English system prompt for the following input (follow the same format as examples),IMPORTANT RULES:\nOutput ONLY the final system prompt, with NO intermediate thinking, explanations, or reasoning.\nDo NOT include phrases like 'Let me think', 'First, I need to', or any similar thought process.\nIt is not allowed to output any thinking and explanatory statements, only the generated system prompts:\n【Input】\nOriginal prompt: You are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.\nCorrect code: ```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```\n【model_Output】\n<|im_end|>\n<|im_start|>assistant\n", "output": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering nesting and correct pairing.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), and the key aspects like correct handling of nested brackets, efficiency, and code structure. Also, avoid any explanations and just output the prompt as per the examples.\n\nSo the system prompt should start with \"As an AI code generation expert...\" then mention the task, the programming language, and the requirements like correctness, efficiency, readability, and adherence to best practices. Also, note that the code should handle all cases, including nested brackets and correct pairing. Make sure to use the exact terms from the examples, like"}, "b_model": [{"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering nesting and correct pairing.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), and the key aspects like correct handling of nested brackets, efficiency, and code structure. Also, avoid any explanations and just output the prompt as per the examples.\n\nSo the system prompt should start with \"As an AI code generation expert...\" then mention the task, the programming language, and the requirements like correctness, efficiency, readability, and adherence to best practices. Also, note that the code should handle all cases, including nested brackets and correct pairing. Make sure to use the exact terms from the examples, like\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.", "output": "As an AI code generation expert, my task is to produce high-quality Python code that checks if the brackets in a given string `expression` are balanced. The code should handle all cases, including nested brackets and correct pairing. The solution must be efficient, readable, and adhere to best practices. The code should also handle edge cases and ensure that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested."}, {"input": "<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering nesting and correct pairing.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), and the key aspects like correct handling of nested brackets, efficiency, and code structure. Also, avoid any explanations and just output the prompt as per the examples.\n\nSo the system prompt should start with \"As an AI code generation expert...\" then mention the task, the programming language, and the requirements like correctness, efficiency, readability, and adherence to best practices. Also, note that the code should handle all cases, including nested brackets and correct pairing. Make sure to use the exact terms from the examples, like\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.", "output": "As an AI code generation expert, my task is to produce a Python function that determines if the brackets in a given string `expression` are balanced. The function should handle parentheses `()`, square brackets `[]`, and curly braces `{}`. The code must be correct, efficient, and readable, adhering to best practices. It should ensure that each opening bracket has a corresponding closing bracket of the same type and that they are correctly nested. The function should handle all edge cases, including nested brackets and correct pairing."}], "c_model": {"input": "你是专业代码评判模型（C模型），需要对生成代码和其对应的提示词进行评分。请严格按照以下规则评估：\n\n【评估对象】\n- 提示词（A模型输出）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering nesting and correct pairing.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), and the key aspects like correct handling of nested brackets, efficiency, and code structure. Also, avoid any explanations and just output the prompt as per the examples.\n\nSo the system prompt should start with \"As an AI code generation expert...\" then mention the task, the programming language, and the requirements like correctness, efficiency, readability, and adherence to best practices. Also, note that the code should handle all cases, including nested brackets and correct pairing. Make sure to use the exact terms from the examples, like\n- B模型输入（合并提示词）：<think>\nOkay, I need to generate a system prompt based on the given input. Let me look at the examples first to understand the structure.\n\nIn the examples, the output starts with \"As an AI code generation expert...\" and then specifies the main points like producing high-quality code, readability, performance, etc. The key elements are the task, the programming language (Python in the examples), and the specific requirements like handling edge cases, efficiency, and code structure.\n\nThe input here is about checking balanced brackets. The correct code uses a stack and a mapping of closing to opening brackets. The task is to determine if the brackets are balanced, considering nesting and correct pairing.\n\nI need to make sure the system prompt mentions the task clearly, the programming language (Python), and the key aspects like correct handling of nested brackets, efficiency, and code structure. Also, avoid any explanations and just output the prompt as per the examples.\n\nSo the system prompt should start with \"As an AI code generation expert...\" then mention the task, the programming language, and the requirements like correctness, efficiency, readability, and adherence to best practices. Also, note that the code should handle all cases, including nested brackets and correct pairing. Make sure to use the exact terms from the examples, like\nYou are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.\n- 生成代码（B模型输出）：As an AI code generation expert, my task is to produce high-quality Python code that checks if the brackets in a given string `expression` are balanced. The code should handle all cases, including nested brackets and correct pairing. The solution must be efficient, readable, and adhere to best practices. The code should also handle edge cases and ensure that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.\n- 代码真值（参考标准）：```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```\n\n【评估维度及权重】\n1. 符合提示词度（30%）：生成代码是否严格遵循B模型输入的要求（功能、格式、约束等）\n2. 代码质量（30%）：代码内容语法正确性、逻辑完整性、可读性（命名规范、注释等）\n3. 功能一致性（40%）：与真值代码的核心功能是否一致（输入输出、处理逻辑）\n4. 模型生成代码含有自然语言内容，在总分基础上扣两分。\n\n【评分规则】\n- 总分：-10 ~ +10（分数越高表示提示词效果越好，A模型应被奖励）\n  - +7~+10：优秀（完全符合B模型输入，代码质量高，功能一致）\n  - +3~+6：良好（基本符合B模型输入，少量问题，功能基本一致）\n  - -2~+2：一般（部分符合B模型输入，有明显问题，功能有偏差）\n  - -6~-3：较差（很少符合B模型输入，严重问题，功能偏差大）\n  - -10~-7：极差（完全不符合B模型输入，无法运行，功能错误）\n- 必须给出具体扣分/加分理由，禁止模糊评价\n\n【输出格式】（严格按照JSON格式输出，键名不可修改）\n{\n  \"total_score\": 具体分数（整数）,\n  \"match_prompt\": 布尔值（true/false，是否符合B模型输入）,\n  \"score_details\": {\n    \"prompt_match_score\": 维度1得分（-4~+4）,\n    \"code_quality_score\": 维度2得分（-3~+3）,\n    \"function_consistency_score\": 维度3得分（-3~+3）\n  },\n  \"reason\": \"具体评价理由（分点说明）\"\n}", "output": [{"total_score": -10, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": -3, "function_consistency_score": -3}, "reason": "1. 符合提示词度（prompt_match_score: -4）：B模型输出未生成实际代码，仅输出了一段关于任务描述的自然语言说明，完全未按照B模型输入中要求的“生成代码”这一核心指令执行。\n2. 代码质量（code_quality_score: -3）：未提供任何可执行的Python代码，因此代码质量无法评估，直接负最大分。\n3. 功能一致性（function_consistency_score: -3）：由于没有生成任何代码，与真值代码之间没有任何功能一致性，负最大分。\n4. 额外扣分：模型生成内容中包含自然语言内容，根据规则在总分基础上再扣2分（已体现在总分中）。"}, {"total_score": -10, "match_prompt": false, "score_details": {"prompt_match_score": -4, "code_quality_score": -3, "function_consistency_score": -3}, "reason": "1. 符合提示词度：B模型输出未生成实际代码，仅输出了系统提示词的描述，完全未满足B模型输入中要求生成实现功能的Python函数这一核心要求，因此在提示词匹配维度严重扣分。\n2. 代码质量：未生成任何代码，因此无法评估语法正确性、逻辑完整性或可读性，代码质量维度严重扣分。\n3. 功能一致性：未生成代码，与真值代码在功能、输入输出和处理逻辑上完全不一致，功能一致性维度严重扣分。\n4. 综合来看，B模型输出未完成核心任务，即生成可运行且功能正确的Python代码，因此总分为极低分（-10）。"}], "avg_score": -10.0}}
