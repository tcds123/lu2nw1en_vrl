[
  {
    "id": "4d61a897c0f86467f5c504a62a5f7282_loop1",
    "original_id": "4d61a897c0f86467f5c504a62a5f7282",
    "input": "You are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.",
    "output": "```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices. You must meticulously analyze the given problem, identify the optimal algorithmic approach for the task at hand, and ensure the implementation is clean, well-structured, and maintainable. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\npay attention to the tokens: tasks, non-overlapping, maximum, tuples",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 1
  },
  {
    "id": "bb50ad7bafcd795247a70ecbd7b93512_loop1",
    "original_id": "bb50ad7bafcd795247a70ecbd7b93512",
    "input": "You are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.",
    "output": "```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```",
    "generated_system_prompt": "As an AI code generation specialist, your responsibility is to deliver pristine, production-grade code that precisely implements the specified requirements. Focus on generating solutions that demonstrate exceptional clarity, optimal algorithmic efficiency, and strict adherence to industry-standard coding practices. Your implementation must be syntactically correct, handle edge cases appropriately, and utilize efficient data structures where applicable. Generate only the requested code implementation without any explanatory text or commentary.\npay close attention to tokens: expression, balanced, brackets, stack",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 1
  },
  {
    "id": "8d0437dda41d2a6e554810be6d598c4a_loop1",
    "original_id": "8d0437dda41d2a6e554810be6d598c4a",
    "input": "You are given a string `text` consisting of lowercase letters and spaces. Your task is to implement a function `count_words` that returns a dictionary with the frequency of each word in the string, excluding common stop words: 'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', and 'with'. Assume that the input string is preprocessed to contain only lowercase letters and spaces.",
    "output": "```python\ndef count_words(text):\n    \"\"\"\n    Returns a dictionary with the frequency of each word in the input string,\n    excluding common stop words.\n\n    :param text: A string consisting of lowercase letters and spaces.\n    :return: A dictionary with words as keys and their frequencies as values.\n    \"\"\"\n    # List of stop words to ignore\n    stop_words = {'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', 'with'}\n    \n    # Split the text into words\n    words = text.split()\n    \n    # Dictionary to store the frequency of each word\n    word_count = {}\n    \n    # Iterate over each word in the list\n    for word in words:\n        # If the word is not a stop word\n        if word not in stop_words:\n            # Increment the word count\n            if word in word_count:\n                word_count[word] += 1\n            else:\n                word_count[word] = 1\n    \n    return word_count\n\n# Test the function with the given example\ntext = \"the quick brown fox jumps over the lazy dog\"\nprint(count_words(text))\n```",
    "generated_system_prompt": "As an AI code generation specialist focused on minimal, efficient implementations, your task is to produce clean, concise code that directly solves the given problem without unnecessary complexity. Generate only the essential code needed to meet the requirements, avoiding over-engineering or verbose patterns. Your implementation should prioritize simplicity and readability while maintaining correctness.\nFocus on key elements: string processing, dictionary operations, exclusion logic, and frequency counting.",
    "focus": "侧重简洁性，用最少的代码实现需求，避免过度设计",
    "loop": 1
  },
  {
    "id": "f130bdca2b8134c4fabb4e8dd5e3becc_loop1",
    "original_id": "f130bdca2b8134c4fabb4e8dd5e3becc",
    "input": "You are given a nested list structure containing integers and other nested lists. Your task is to write a recursive function named `flatten_list` that takes this nested list as input and returns a new list with all the integers in a flat structure. The order of elements in the output list should be the same as their order in the original nested list.",
    "output": "```python\ndef flatten_list(nested_list):\n    \"\"\"\n    Recursively flattens a nested list of integers.\n\n    :param nested_list: List of integers and/or nested lists of integers.\n    :return: A flat list containing all integers from the nested list.\n    \"\"\"\n    flat_list = []\n    for element in nested_list:\n        if isinstance(element, list):\n            flat_list.extend(flatten_list(element))\n        else:\n            flat_list.append(element)\n    return flat_list\n\n# Example usage:\nnested_list_example = [1, [2, [3, 4], 5], 6, [7, 8]]\nprint(flatten_list(nested_list_example))  # Output: [1, 2, 3, 4, 5, 6, 7, 8]\n```",
    "generated_system_prompt": "As a code generation specialist focused on minimalist solutions, your task is to produce clean, efficient code that directly addresses the given requirements without unnecessary complexity. Prioritize recursive approaches when dealing with nested structures, leverage built-in language features for optimal performance, and ensure the implementation is both readable and maintainable while using the fewest lines possible. Generate only the essential code that solves the problem precisely, avoiding over-engineering or redundant abstractions.\nno natural language!",
    "focus": "侧重简洁性，用最少的代码实现需求，避免过度设计",
    "loop": 1
  },
  {
    "id": "a5af5b8267c4fb797b4f9cdf2bf7fe04_loop1",
    "original_id": "a5af5b8267c4fb797b4f9cdf2bf7fe04",
    "input": "You are given a list of integers `numbers`. Your task is to implement a function `find_mode` that determines the mode of the list, which is the element that appears most frequently. In the event of a tie, where multiple elements share the highest frequency, return the smallest of these elements. If the list is empty, the function should return `None`.",
    "output": "```python\ndef find_mode(numbers):\n    \"\"\"\n    Returns the mode of the list of integers. If there is a tie, returns the smallest element among them.\n    Returns None if the list is empty.\n    \n    :param numbers: List of integers\n    :return: Integer or None\n    \"\"\"\n    if not numbers:\n        return None\n    \n    frequency = {}\n    for num in numbers:\n        if num in frequency:\n            frequency[num] += 1\n        else:\n            frequency[num] = 1\n    \n    max_freq = max(frequency.values())\n    modes = [num for num, freq in frequency.items() if freq == max_freq]\n    \n    return min(modes)\n```",
    "generated_system_prompt": "As an AI code generation specialist focused on robust software development, your task is to produce high-quality, production-ready code that prioritizes edge case handling and exceptional reliability. Your implementation must demonstrate meticulous attention to boundary conditions, null/empty input validation, and graceful error handling while maintaining optimal performance and clean code structure. Generate precise, efficient solutions that anticipate potential failure points and handle them elegantly, ensuring the code is both functionally correct and defensively programmed against unexpected inputs or states.",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 1
  },
  {
    "id": "e7ca4436b5c004b2c07534b50b1e4c83_loop1",
    "original_id": "e7ca4436b5c004b2c07534b50b1e4c83",
    "input": "You are tasked with implementing a function named `factorial` that calculates the factorial of a non-negative integer `n`. The factorial of a non-negative integer `n` is the product of all positive integers less than or equal to `n`. By definition, the factorial of 0 is 1. Your function should raise a `ValueError` if a negative integer is provided as input.",
    "output": "```python\ndef factorial(n):\n    \"\"\"\n    Calculate the factorial of a non-negative integer n.\n    \n    Parameters:\n    n (int): A non-negative integer whose factorial is to be computed.\n    \n    Returns:\n    int: The factorial of the given integer n.\n    \n    Raises:\n    ValueError: If n is a negative integer.\n    \"\"\"\n    if n < 0:\n        raise ValueError(\"Factorial is not defined for negative numbers\")\n    \n    result = 1\n    for i in range(1, n + 1):\n        result *= i\n    return result\n\n# Example Usage:\n# print(factorial(0))  # Output: 1\n# print(factorial(5))  # Output: 120\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are responsible for crafting robust, platform-agnostic code that seamlessly operates across diverse computing environments. Your implementation must prioritize cross-platform compatibility, ensuring the generated code functions reliably whether deployed on Windows, Linux, macOS, or within containerized environments. Focus on producing clean, efficient solutions that handle edge cases gracefully while maintaining optimal performance characteristics across different Python runtime versions and system architectures. The code should be self-contained, avoiding platform-specific dependencies unless absolutely necessary, and must include appropriate error handling mechanisms that work consistently across all target environments.\npay attention to the tokens: factorial, ValueError, non-negative",
    "focus": "强调代码的兼容性，考虑不同环境下的运行可能性",
    "loop": 1
  },
  {
    "id": "036b336a0426080e8abbfd30efbd9937_loop1",
    "original_id": "036b336a0426080e8abbfd30efbd9937",
    "input": "You are tasked with implementing a `BankAccount` class in Python that simulates basic bank account operations. The class should support the following functionalities:",
    "output": "```python\nclass BankAccount:\n    def __init__(self):\n        \"\"\"\n        Initializes a new bank account with a balance of zero.\n        \"\"\"\n        self.balance = 0\n\n    def deposit(self, amount):\n        \"\"\"\n        Adds a specified amount to the account balance if the amount is positive.\n        \n        :param amount: The amount to deposit.\n        \"\"\"\n        if amount > 0:\n            self.balance += amount\n\n    def withdraw(self, amount):\n        \"\"\"\n        Subtracts a specified amount from the account balance if the amount is positive and does not exceed the current balance.\n        \n        :param amount: The amount to withdraw.\n        \"\"\"\n        if 0 < amount <= self.balance:\n            self.balance -= amount\n\n    def check_balance(self):\n        \"\"\"\n        Returns the current balance of the account.\n        \n        :return: The current balance.\n        \"\"\"\n        return self.balance\n```",
    "generated_system_prompt": "As an expert software engineer specializing in robust code generation, you are tasked with implementing production-grade solutions that prioritize comprehensive error handling, edge case management, and defensive programming practices. Your primary focus is to generate code that gracefully handles all possible scenarios, validates inputs rigorously, and ensures system stability under various conditions. The implementation must demonstrate exceptional attention to boundary conditions, null checks, type validation, and exception handling while maintaining clean, maintainable code structure. Every method should anticipate and handle potential failure modes, ensuring the code is resilient and fault-tolerant in real-world applications.\npay attention to the tokens: BankAccount, deposit, withdraw, balance",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 1
  },
  {
    "id": "5d5954895418a80191cee671a990eea5_loop1",
    "original_id": "5d5954895418a80191cee671a990eea5",
    "input": "You are given a string `text` and a list of integers `positions`. Your task is to implement a function `remove_chars_at_positions` that removes characters from `text` at the indices specified in `positions`. The function should return the modified string. Assume that all positions in the list are valid indices within the string and that the list may contain duplicate indices, but only one character should be removed per index.",
    "output": "```python\ndef remove_chars_at_positions(text, positions):\n    \"\"\"\n    Removes characters from the string at the specified positions.\n\n    :param text: The original string from which characters will be removed.\n    :param positions: A list of integer positions indicating which characters to remove.\n    :return: A new string with the specified characters removed.\n    \"\"\"\n    positions_set = set(positions)\n    return ''.join(char for idx, char in enumerate(text) if idx not in positions_set)\n\n# Example usage\ntext = \"hello world\"\npositions = [0, 5, 10]\nprint(remove_chars_at_positions(text, positions))  # Output: \"ello orld\"\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that demonstrates excellence in modular design, facilitating future extensions and feature reusability. The implementation must be functionally correct, efficient, and adhere to established software engineering best practices. Focus on creating clean, well-structured code with appropriate abstraction layers that enable easy maintenance and scalability. The final output should be a precise, direct implementation without any unnecessary explanations or supplementary text.\npay attention to the tokens: positions, string, remove, indices",
    "focus": "要求代码模块化设计，便于后续扩展和功能复用",
    "loop": 1
  },
  {
    "id": "d68222fe95725f75ccfd2848c0e0b65e_loop1",
    "original_id": "d68222fe95725f75ccfd2848c0e0b65e",
    "input": "You are tasked with implementing a function `generate_report` that processes a list of sales data. Each sale is represented as a dictionary with keys `product`, `quantity`, and `price`. Your function should compute and return a string summarizing the total quantity sold and the total revenue generated from these sales.",
    "output": "```python\ndef generate_report(sales):\n    \"\"\"\n    Generates a report summarizing the total quantity sold and total revenue from a list of sales data.\n\n    Parameters:\n    sales (list of dict): A list where each dictionary contains 'product', 'quantity', and 'price' keys.\n\n    Returns:\n    str: A string summarizing the total quantity sold and total revenue.\n    \"\"\"\n    total_quantity = 0\n    total_revenue = 0\n\n    for sale in sales:\n        total_quantity += sale['quantity']\n        total_revenue += sale['quantity'] * sale['price']\n\n    return f\"Total Quantity Sold: {total_quantity}, Total Revenue: ${total_revenue}\"\n```",
    "generated_system_prompt": "As an AI code generation specialist focused on performance optimization, you are tasked with producing highly efficient, production-ready code that minimizes computational overhead and maximizes execution speed. Your primary objective is to generate implementations that not only solve the given problem correctly but also demonstrate exceptional performance characteristics through optimal algorithm selection, efficient data structure usage, and elimination of redundant operations. The code must be clean, maintainable, and follow best practices while prioritizing runtime efficiency and resource utilization. Generate the exact implementation without any explanatory text or commentary.\nfocus on: sales, revenue, efficiency optimization",
    "focus": "强调生成代码的执行效率和性能优化，减少冗余计算",
    "loop": 1
  },
  {
    "id": "4d61a897c0f86467f5c504a62a5f7282_loop2",
    "original_id": "4d61a897c0f86467f5c504a62a5f7282",
    "input": "You are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.",
    "output": "```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in algorithmic efficiency, readability, and adherence to established software engineering best practices. You must carefully analyze the given problem, select optimal algorithms and data structures, and ensure the implementation is clean, well-documented, and maintainable. The final output should be a precise, direct implementation of the requested functionality without any unnecessary explanations or supplementary text preceding or following the code itself.\nFocus on key tokens: tasks, non-overlapping, maximum, start, end, tuples",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 2
  },
  {
    "id": "bb50ad7bafcd795247a70ecbd7b93512_loop2",
    "original_id": "bb50ad7bafcd795247a70ecbd7b93512",
    "input": "You are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.",
    "output": "```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```",
    "generated_system_prompt": "As an expert code engineer specializing in algorithm implementation, you are tasked with generating production-grade code that precisely solves the given problem. Your primary focus is on delivering functionally correct, efficient, and maintainable code that strictly adheres to software engineering best practices. You must carefully analyze the problem requirements, implement appropriate data structures and algorithms, and ensure your solution handles all edge cases robustly. The generated code should be clean, well-documented with clear docstrings, and follow standard naming conventions. Your implementation must directly address the specified task without extraneous explanations or commentary outside the code itself.\npay attention to critical elements: balanced, brackets, stack, expression",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 2
  },
  {
    "id": "8d0437dda41d2a6e554810be6d598c4a_loop2",
    "original_id": "8d0437dda41d2a6e554810be6d598c4a",
    "input": "You are given a string `text` consisting of lowercase letters and spaces. Your task is to implement a function `count_words` that returns a dictionary with the frequency of each word in the string, excluding common stop words: 'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', and 'with'. Assume that the input string is preprocessed to contain only lowercase letters and spaces.",
    "output": "```python\ndef count_words(text):\n    \"\"\"\n    Returns a dictionary with the frequency of each word in the input string,\n    excluding common stop words.\n\n    :param text: A string consisting of lowercase letters and spaces.\n    :return: A dictionary with words as keys and their frequencies as values.\n    \"\"\"\n    # List of stop words to ignore\n    stop_words = {'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', 'with'}\n    \n    # Split the text into words\n    words = text.split()\n    \n    # Dictionary to store the frequency of each word\n    word_count = {}\n    \n    # Iterate over each word in the list\n    for word in words:\n        # If the word is not a stop word\n        if word not in stop_words:\n            # Increment the word count\n            if word in word_count:\n                word_count[word] += 1\n            else:\n                word_count[word] = 1\n    \n    return word_count\n\n# Test the function with the given example\ntext = \"the quick brown fox jumps over the lazy dog\"\nprint(count_words(text))\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are responsible for producing high-quality, production-ready code that precisely implements the given requirements. Your primary focus is to generate code that demonstrates exceptional clarity, efficiency, and strict adherence to software engineering best practices. You must carefully analyze the problem statement, implement appropriate data structures and algorithms, and ensure the solution is robust, maintainable, and performs optimally. The generated code should directly address the specified functionality without any extraneous explanations or commentary outside the code itself.\nPay particular attention to: dictionary operations, string processing, and filtering logic.",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 2
  },
  {
    "id": "f130bdca2b8134c4fabb4e8dd5e3becc_loop2",
    "original_id": "f130bdca2b8134c4fabb4e8dd5e3becc",
    "input": "You are given a nested list structure containing integers and other nested lists. Your task is to write a recursive function named `flatten_list` that takes this nested list as input and returns a new list with all the integers in a flat structure. The order of elements in the output list should be the same as their order in the original nested list.",
    "output": "```python\ndef flatten_list(nested_list):\n    \"\"\"\n    Recursively flattens a nested list of integers.\n\n    :param nested_list: List of integers and/or nested lists of integers.\n    :return: A flat list containing all integers from the nested list.\n    \"\"\"\n    flat_list = []\n    for element in nested_list:\n        if isinstance(element, list):\n            flat_list.extend(flatten_list(element))\n        else:\n            flat_list.append(element)\n    return flat_list\n\n# Example usage:\nnested_list_example = [1, [2, [3, 4], 5], 6, [7, 8]]\nprint(flatten_list(nested_list_example))  # Output: [1, 2, 3, 4, 5, 6, 7, 8]\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with implementing robust, production-quality solutions that demonstrate exceptional attention to edge cases and error handling. Your implementation must prioritize defensive programming practices, ensuring graceful handling of invalid inputs, empty structures, and boundary conditions. Focus on creating resilient code that anticipates potential failure modes while maintaining clean, efficient algorithms. The solution should be a direct, precise implementation without extraneous commentary, emphasizing reliability and fault tolerance in real-world scenarios.\npay attention to: nested, recursive, flatten",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 2
  },
  {
    "id": "a5af5b8267c4fb797b4f9cdf2bf7fe04_loop2",
    "original_id": "a5af5b8267c4fb797b4f9cdf2bf7fe04",
    "input": "You are given a list of integers `numbers`. Your task is to implement a function `find_mode` that determines the mode of the list, which is the element that appears most frequently. In the event of a tie, where multiple elements share the highest frequency, return the smallest of these elements. If the list is empty, the function should return `None`.",
    "output": "```python\ndef find_mode(numbers):\n    \"\"\"\n    Returns the mode of the list of integers. If there is a tie, returns the smallest element among them.\n    Returns None if the list is empty.\n    \n    :param numbers: List of integers\n    :return: Integer or None\n    \"\"\"\n    if not numbers:\n        return None\n    \n    frequency = {}\n    for num in numbers:\n        if num in frequency:\n            frequency[num] += 1\n        else:\n            frequency[num] = 1\n    \n    max_freq = max(frequency.values())\n    modes = [num for num, freq in frequency.items() if freq == max_freq]\n    \n    return min(modes)\n```",
    "generated_system_prompt": "As an AI code generation specialist focused on performance optimization, you are tasked with producing highly efficient, production-ready code that minimizes computational overhead and maximizes execution speed. Your primary objective is to implement solutions that not only meet functional requirements but also demonstrate exceptional performance characteristics through optimal algorithm selection, efficient data structure usage, and elimination of redundant computations. The generated code must be clean, maintainable, and follow established software engineering best practices while prioritizing runtime efficiency and memory optimization. Deliver direct, precise implementations without any explanatory text or comments beyond essential documentation.\npay attention to key tokens: list, integers, mode, frequency, smallest",
    "focus": "强调生成代码的执行效率和性能优化，减少冗余计算",
    "loop": 2
  },
  {
    "id": "e7ca4436b5c004b2c07534b50b1e4c83_loop2",
    "original_id": "e7ca4436b5c004b2c07534b50b1e4c83",
    "input": "You are tasked with implementing a function named `factorial` that calculates the factorial of a non-negative integer `n`. The factorial of a non-negative integer `n` is the product of all positive integers less than or equal to `n`. By definition, the factorial of 0 is 1. Your function should raise a `ValueError` if a negative integer is provided as input.",
    "output": "```python\ndef factorial(n):\n    \"\"\"\n    Calculate the factorial of a non-negative integer n.\n    \n    Parameters:\n    n (int): A non-negative integer whose factorial is to be computed.\n    \n    Returns:\n    int: The factorial of the given integer n.\n    \n    Raises:\n    ValueError: If n is a negative integer.\n    \"\"\"\n    if n < 0:\n        raise ValueError(\"Factorial is not defined for negative numbers\")\n    \n    result = 1\n    for i in range(1, n + 1):\n        result *= i\n    return result\n\n# Example Usage:\n# print(factorial(0))  # Output: 1\n# print(factorial(5))  # Output: 120\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are responsible for creating robust, production-grade implementations that prioritize comprehensive error handling and edge case management. Your generated code must demonstrate defensive programming principles by anticipating and gracefully handling all possible input scenarios, including boundary conditions, invalid inputs, and exceptional cases. Focus on implementing thorough input validation, appropriate exception handling, and ensuring the code behaves predictably under all circumstances. The implementation should be efficient, maintainable, and follow established coding standards while emphasizing reliability and fault tolerance.\nPay close attention to keywords: ValueError, non-negative, factorial, edge cases",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 2
  },
  {
    "id": "036b336a0426080e8abbfd30efbd9937_loop2",
    "original_id": "036b336a0426080e8abbfd30efbd9937",
    "input": "You are tasked with implementing a `BankAccount` class in Python that simulates basic bank account operations. The class should support the following functionalities:",
    "output": "```python\nclass BankAccount:\n    def __init__(self):\n        \"\"\"\n        Initializes a new bank account with a balance of zero.\n        \"\"\"\n        self.balance = 0\n\n    def deposit(self, amount):\n        \"\"\"\n        Adds a specified amount to the account balance if the amount is positive.\n        \n        :param amount: The amount to deposit.\n        \"\"\"\n        if amount > 0:\n            self.balance += amount\n\n    def withdraw(self, amount):\n        \"\"\"\n        Subtracts a specified amount from the account balance if the amount is positive and does not exceed the current balance.\n        \n        :param amount: The amount to withdraw.\n        \"\"\"\n        if 0 < amount <= self.balance:\n            self.balance -= amount\n\n    def check_balance(self):\n        \"\"\"\n        Returns the current balance of the account.\n        \n        :return: The current balance.\n        \"\"\"\n        return self.balance\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to analyze the given problem systematically, decompose it into logical components, and implement a solution that demonstrates excellence in design patterns, code organization, and software engineering principles. You must first understand the core requirements and constraints, then design appropriate class structures, methods, and data flow before proceeding with the implementation. The generated code should be clean, self-documenting, and follow established conventions for the target programming language. Focus on creating robust, maintainable solutions that handle edge cases appropriately and demonstrate professional-grade coding practices.\npay attention to the tokens: class, Python, implementing, functionalities",
    "focus": "引导模型先分析需求逻辑，再分步实现代码",
    "loop": 2
  },
  {
    "id": "5d5954895418a80191cee671a990eea5_loop2",
    "original_id": "5d5954895418a80191cee671a990eea5",
    "input": "You are given a string `text` and a list of integers `positions`. Your task is to implement a function `remove_chars_at_positions` that removes characters from `text` at the indices specified in `positions`. The function should return the modified string. Assume that all positions in the list are valid indices within the string and that the list may contain duplicate indices, but only one character should be removed per index.",
    "output": "```python\ndef remove_chars_at_positions(text, positions):\n    \"\"\"\n    Removes characters from the string at the specified positions.\n\n    :param text: The original string from which characters will be removed.\n    :param positions: A list of integer positions indicating which characters to remove.\n    :return: A new string with the specified characters removed.\n    \"\"\"\n    positions_set = set(positions)\n    return ''.join(char for idx, char in enumerate(text) if idx not in positions_set)\n\n# Example usage\ntext = \"hello world\"\npositions = [0, 5, 10]\nprint(remove_chars_at_positions(text, positions))  # Output: \"ello orld\"\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that is not only functionally correct but also exemplifies excellence in readability, performance, robustness, and adherence to established software engineering best practices. You must meticulously analyze the given problem, implement efficient algorithms with appropriate data structures, and ensure the code is clean, well-structured, and maintainable. The implementation should handle edge cases gracefully and follow proper naming conventions. Generate only the requested code implementation without any unnecessary explanations or supplementary text.\npay attention to the tokens: string, positions, remove, indices",
    "focus": "注重代码的正确性和遵循编程规范，严格匹配输入需求",
    "loop": 2
  },
  {
    "id": "d68222fe95725f75ccfd2848c0e0b65e_loop2",
    "original_id": "d68222fe95725f75ccfd2848c0e0b65e",
    "input": "You are tasked with implementing a function `generate_report` that processes a list of sales data. Each sale is represented as a dictionary with keys `product`, `quantity`, and `price`. Your function should compute and return a string summarizing the total quantity sold and the total revenue generated from these sales.",
    "output": "```python\ndef generate_report(sales):\n    \"\"\"\n    Generates a report summarizing the total quantity sold and total revenue from a list of sales data.\n\n    Parameters:\n    sales (list of dict): A list where each dictionary contains 'product', 'quantity', and 'price' keys.\n\n    Returns:\n    str: A string summarizing the total quantity sold and total revenue.\n    \"\"\"\n    total_quantity = 0\n    total_revenue = 0\n\n    for sale in sales:\n        total_quantity += sale['quantity']\n        total_revenue += sale['quantity'] * sale['price']\n\n    return f\"Total Quantity Sold: {total_quantity}, Total Revenue: ${total_revenue}\"\n```",
    "generated_system_prompt": "As a professional code engineer specializing in modular software design, you are tasked with generating production-grade, extensible code based on user requirements. Your primary focus is to create well-structured, reusable modules that facilitate future enhancements and functional expansions. Each implementation must demonstrate clear separation of concerns, proper abstraction layers, and adherence to SOLID principles. The code should be designed with scalability in mind, enabling seamless integration of new features without disrupting existing functionality. Generate only the requested code implementation without any accompanying explanations or commentary.\npay attention to critical tokens: function, dictionary, parameters, modular design patterns",
    "focus": "要求代码模块化设计，便于后续扩展和功能复用",
    "loop": 2
  },
  {
    "id": "4d61a897c0f86467f5c504a62a5f7282_loop3",
    "original_id": "4d61a897c0f86467f5c504a62a5f7282",
    "input": "You are given a list of `n` tasks, each represented as a tuple `(start, end)`, indicating the start and end times of the task. The tasks are sorted by their start times. Your goal is to determine the maximum number of non-overlapping tasks that can be selected. Two tasks are considered non-overlapping if the start time of one task is greater than or equal to the end time of the other.",
    "output": "```python\ndef max_non_overlapping_tasks(tasks):\n    \"\"\"\n    Returns the maximum number of non-overlapping tasks that can be selected from a list of tasks.\n    \n    :param tasks: List of tuples, where each tuple (start, end) represents the start and end times of a task.\n    :return: Integer representing the maximum number of non-overlapping tasks.\n    \"\"\"\n    if not tasks:\n        return 0\n\n    count = 1\n    last_end = tasks[0][1]\n\n    for i in range(1, len(tasks)):\n        current_start, current_end = tasks[i]\n        if current_start >= last_end:\n            count += 1\n            last_end = current_end\n\n    return count\n```",
    "generated_system_prompt": "As a professional code engineer specializing in algorithm implementation, you are tasked with generating clean, well-documented, and maintainable code that solves computational problems efficiently. Your implementation must feature comprehensive inline comments explaining the logic flow, clear variable naming conventions, and robust edge case handling. Focus on producing code that not only works correctly but also demonstrates clarity of thought through detailed documentation, making it easy for other developers to understand, modify, and extend the solution. Ensure the code follows established patterns for the problem domain while maintaining optimal time and space complexity.",
    "focus": "突出代码的可读性、可维护性，要求添加清晰注释",
    "loop": 3
  },
  {
    "id": "bb50ad7bafcd795247a70ecbd7b93512_loop3",
    "original_id": "bb50ad7bafcd795247a70ecbd7b93512",
    "input": "You are given a string `expression` consisting of characters including parentheses `()`, square brackets `[]`, and curly braces `{}`. Your task is to determine if the brackets in the expression are balanced. A string with balanced brackets means that each opening bracket has a corresponding closing bracket of the same type and they are correctly nested.",
    "output": "```python\ndef is_balanced_brackets(expression):\n    \"\"\"\n    Checks if all the brackets in the given expression are balanced.\n    \n    :param expression: A string containing characters including parentheses, square brackets, and curly braces.\n    :return: True if the brackets are balanced, False otherwise.\n    \"\"\"\n    stack = []\n    bracket_map = {')': '(', ']': '[', '}': '{'}\n    \n    for char in expression:\n        if char in bracket_map.values():\n            stack.append(char)\n        elif char in bracket_map:\n            if not stack or bracket_map[char] != stack.pop():\n                return False\n    \n    return not stack\n```",
    "generated_system_prompt": "As an AI code generation specialist, your mission is to deliver robust, production-grade code that prioritizes comprehensive edge case handling and exceptional error resilience. You must generate implementations that anticipate and gracefully handle all potential failure scenarios, boundary conditions, and invalid inputs while maintaining optimal performance and clean architecture. Your code should demonstrate meticulous attention to defensive programming practices, including proper input validation, exception handling, and fail-safe mechanisms. Focus on creating solutions that are not only correct for typical cases but also resilient against unexpected inputs, empty collections, null values, and extreme data ranges. The implementation must be self-contained, fully functional, and ready for immediate deployment without requiring additional error handling or validation layers.\npay attention to the tokens: balanced, brackets, expression, stack",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 3
  },
  {
    "id": "8d0437dda41d2a6e554810be6d598c4a_loop3",
    "original_id": "8d0437dda41d2a6e554810be6d598c4a",
    "input": "You are given a string `text` consisting of lowercase letters and spaces. Your task is to implement a function `count_words` that returns a dictionary with the frequency of each word in the string, excluding common stop words: 'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', and 'with'. Assume that the input string is preprocessed to contain only lowercase letters and spaces.",
    "output": "```python\ndef count_words(text):\n    \"\"\"\n    Returns a dictionary with the frequency of each word in the input string,\n    excluding common stop words.\n\n    :param text: A string consisting of lowercase letters and spaces.\n    :return: A dictionary with words as keys and their frequencies as values.\n    \"\"\"\n    # List of stop words to ignore\n    stop_words = {'the', 'and', 'a', 'an', 'in', 'on', 'at', 'by', 'for', 'with'}\n    \n    # Split the text into words\n    words = text.split()\n    \n    # Dictionary to store the frequency of each word\n    word_count = {}\n    \n    # Iterate over each word in the list\n    for word in words:\n        # If the word is not a stop word\n        if word not in stop_words:\n            # Increment the word count\n            if word in word_count:\n                word_count[word] += 1\n            else:\n                word_count[word] = 1\n    \n    return word_count\n\n# Test the function with the given example\ntext = \"the quick brown fox jumps over the lazy dog\"\nprint(count_words(text))\n```",
    "generated_system_prompt": "As a code generation specialist, your objective is to produce concise, efficient code that directly addresses the given requirements. Focus on creating minimal yet complete implementations that avoid unnecessary complexity or over-engineering. Generate clean, functional code that solves the problem using the most straightforward approach possible, ensuring correctness while maintaining simplicity in design and implementation.",
    "focus": "侧重简洁性，用最少的代码实现需求，避免过度设计",
    "loop": 3
  },
  {
    "id": "f130bdca2b8134c4fabb4e8dd5e3becc_loop3",
    "original_id": "f130bdca2b8134c4fabb4e8dd5e3becc",
    "input": "You are given a nested list structure containing integers and other nested lists. Your task is to write a recursive function named `flatten_list` that takes this nested list as input and returns a new list with all the integers in a flat structure. The order of elements in the output list should be the same as their order in the original nested list.",
    "output": "```python\ndef flatten_list(nested_list):\n    \"\"\"\n    Recursively flattens a nested list of integers.\n\n    :param nested_list: List of integers and/or nested lists of integers.\n    :return: A flat list containing all integers from the nested list.\n    \"\"\"\n    flat_list = []\n    for element in nested_list:\n        if isinstance(element, list):\n            flat_list.extend(flatten_list(element))\n        else:\n            flat_list.append(element)\n    return flat_list\n\n# Example usage:\nnested_list_example = [1, [2, [3, 4], 5], 6, [7, 8]]\nprint(flatten_list(nested_list_example))  # Output: [1, 2, 3, 4, 5, 6, 7, 8]\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing robust, production-ready code that prioritizes edge case handling and exceptional reliability. Your primary objective is to generate implementations that not only meet the functional requirements but also demonstrate exceptional defensive programming practices, thorough input validation, and comprehensive error handling strategies. You must carefully analyze potential failure points, implement appropriate safeguards for boundary conditions, and ensure the code gracefully handles unexpected inputs while maintaining optimal performance and clean architecture. The final output should be a precise, well-tested implementation that anticipates and handles various edge cases without any explanatory text surrounding the code.\nfocus on: recursive, nested, flatten, list handling",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 3
  },
  {
    "id": "a5af5b8267c4fb797b4f9cdf2bf7fe04_loop3",
    "original_id": "a5af5b8267c4fb797b4f9cdf2bf7fe04",
    "input": "You are given a list of integers `numbers`. Your task is to implement a function `find_mode` that determines the mode of the list, which is the element that appears most frequently. In the event of a tie, where multiple elements share the highest frequency, return the smallest of these elements. If the list is empty, the function should return `None`.",
    "output": "```python\ndef find_mode(numbers):\n    \"\"\"\n    Returns the mode of the list of integers. If there is a tie, returns the smallest element among them.\n    Returns None if the list is empty.\n    \n    :param numbers: List of integers\n    :return: Integer or None\n    \"\"\"\n    if not numbers:\n        return None\n    \n    frequency = {}\n    for num in numbers:\n        if num in frequency:\n            frequency[num] += 1\n        else:\n            frequency[num] = 1\n    \n    max_freq = max(frequency.values())\n    modes = [num for num, freq in frequency.items() if freq == max_freq]\n    \n    return min(modes)\n```",
    "generated_system_prompt": "As an AI code generation specialist, your objective is to produce concise, efficient code that directly solves the given problem. Focus on minimal implementation without over-engineering - use built-in functions and simple data structures to achieve the required functionality. The code should be clean, readable, and handle edge cases appropriately. Generate only the essential code needed to fulfill the requirements, avoiding unnecessary abstractions or verbose implementations.",
    "focus": "侧重简洁性，用最少的代码实现需求，避免过度设计",
    "loop": 3
  },
  {
    "id": "e7ca4436b5c004b2c07534b50b1e4c83_loop3",
    "original_id": "e7ca4436b5c004b2c07534b50b1e4c83",
    "input": "You are tasked with implementing a function named `factorial` that calculates the factorial of a non-negative integer `n`. The factorial of a non-negative integer `n` is the product of all positive integers less than or equal to `n`. By definition, the factorial of 0 is 1. Your function should raise a `ValueError` if a negative integer is provided as input.",
    "output": "```python\ndef factorial(n):\n    \"\"\"\n    Calculate the factorial of a non-negative integer n.\n    \n    Parameters:\n    n (int): A non-negative integer whose factorial is to be computed.\n    \n    Returns:\n    int: The factorial of the given integer n.\n    \n    Raises:\n    ValueError: If n is a negative integer.\n    \"\"\"\n    if n < 0:\n        raise ValueError(\"Factorial is not defined for negative numbers\")\n    \n    result = 1\n    for i in range(1, n + 1):\n        result *= i\n    return result\n\n# Example Usage:\n# print(factorial(0))  # Output: 1\n# print(factorial(5))  # Output: 120\n```",
    "generated_system_prompt": "As an AI code generation specialist focused on performance optimization, you are tasked with implementing highly efficient, production-grade solutions that minimize computational overhead while maintaining code clarity and correctness. Your primary objective is to generate implementations that optimize for both time and space complexity, avoiding redundant calculations and leveraging algorithmic optimizations where applicable. The code must be robust, handle edge cases appropriately, and follow established performance best practices without sacrificing readability or maintainability. Focus on delivering clean, efficient implementations that demonstrate superior computational performance.\npay attention to key tokens: factorial, non-negative, ValueError",
    "focus": "强调生成代码的执行效率和性能优化，减少冗余计算",
    "loop": 3
  },
  {
    "id": "036b336a0426080e8abbfd30efbd9937_loop3",
    "original_id": "036b336a0426080e8abbfd30efbd9937",
    "input": "You are tasked with implementing a `BankAccount` class in Python that simulates basic bank account operations. The class should support the following functionalities:",
    "output": "```python\nclass BankAccount:\n    def __init__(self):\n        \"\"\"\n        Initializes a new bank account with a balance of zero.\n        \"\"\"\n        self.balance = 0\n\n    def deposit(self, amount):\n        \"\"\"\n        Adds a specified amount to the account balance if the amount is positive.\n        \n        :param amount: The amount to deposit.\n        \"\"\"\n        if amount > 0:\n            self.balance += amount\n\n    def withdraw(self, amount):\n        \"\"\"\n        Subtracts a specified amount from the account balance if the amount is positive and does not exceed the current balance.\n        \n        :param amount: The amount to withdraw.\n        \"\"\"\n        if 0 < amount <= self.balance:\n            self.balance -= amount\n\n    def check_balance(self):\n        \"\"\"\n        Returns the current balance of the account.\n        \n        :return: The current balance.\n        \"\"\"\n        return self.balance\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are responsible for creating robust, production-grade implementations that prioritize comprehensive error handling and edge case management. Your generated code must demonstrate exceptional attention to boundary conditions, input validation, and graceful error recovery while maintaining clean, efficient architecture. Focus on defensive programming principles, ensuring all potential failure scenarios are anticipated and properly handled through appropriate exception handling, validation checks, and fail-safe mechanisms. The implementation should be immediately deployable in production environments with minimal risk of runtime failures.\npay attention to critical tokens: BankAccount, deposit, withdraw, balance",
    "focus": "引导模型优先考虑边界情况和异常处理，增强鲁棒性",
    "loop": 3
  },
  {
    "id": "5d5954895418a80191cee671a990eea5_loop3",
    "original_id": "5d5954895418a80191cee671a990eea5",
    "input": "You are given a string `text` and a list of integers `positions`. Your task is to implement a function `remove_chars_at_positions` that removes characters from `text` at the indices specified in `positions`. The function should return the modified string. Assume that all positions in the list are valid indices within the string and that the list may contain duplicate indices, but only one character should be removed per index.",
    "output": "```python\ndef remove_chars_at_positions(text, positions):\n    \"\"\"\n    Removes characters from the string at the specified positions.\n\n    :param text: The original string from which characters will be removed.\n    :param positions: A list of integer positions indicating which characters to remove.\n    :return: A new string with the specified characters removed.\n    \"\"\"\n    positions_set = set(positions)\n    return ''.join(char for idx, char in enumerate(text) if idx not in positions_set)\n\n# Example usage\ntext = \"hello world\"\npositions = [0, 5, 10]\nprint(remove_chars_at_positions(text, positions))  # Output: \"ello orld\"\n```",
    "generated_system_prompt": "As an AI specialized in code generation, your task is to analyze the given requirements and produce clean, efficient, and well-structured code. Focus on understanding the problem constraints, identifying edge cases, and implementing a solution that follows best practices for performance and maintainability. Generate only the requested function implementation with proper documentation, without any explanatory text or commentary outside the code block.\npay attention to key elements: string manipulation, index-based operations, and handling of duplicate positions",
    "focus": "引导模型先分析需求逻辑，再分步实现代码",
    "loop": 3
  },
  {
    "id": "d68222fe95725f75ccfd2848c0e0b65e_loop3",
    "original_id": "d68222fe95725f75ccfd2848c0e0b65e",
    "input": "You are tasked with implementing a function `generate_report` that processes a list of sales data. Each sale is represented as a dictionary with keys `product`, `quantity`, and `price`. Your function should compute and return a string summarizing the total quantity sold and the total revenue generated from these sales.",
    "output": "```python\ndef generate_report(sales):\n    \"\"\"\n    Generates a report summarizing the total quantity sold and total revenue from a list of sales data.\n\n    Parameters:\n    sales (list of dict): A list where each dictionary contains 'product', 'quantity', and 'price' keys.\n\n    Returns:\n    str: A string summarizing the total quantity sold and total revenue.\n    \"\"\"\n    total_quantity = 0\n    total_revenue = 0\n\n    for sale in sales:\n        total_quantity += sale['quantity']\n        total_revenue += sale['quantity'] * sale['price']\n\n    return f\"Total Quantity Sold: {total_quantity}, Total Revenue: ${total_revenue}\"\n```",
    "generated_system_prompt": "As an AI code generation specialist, you are tasked with producing high-quality, production-ready code based on user requirements. Your primary objective is to generate code that emphasizes modular design principles, enabling seamless future extensions and promoting functional reusability across different components. You must analyze the given requirements meticulously, implement clean separation of concerns, and ensure each function or module serves a single, well-defined purpose. The generated code should follow established design patterns, maintain loose coupling between components, and provide clear interfaces for integration. Focus on creating reusable utilities, extracting common functionality into separate modules, and structuring the codebase to accommodate future enhancements without requiring significant refactoring.\npay attention to the tokens: function, report, sales, dictionary",
    "focus": "要求代码模块化设计，便于后续扩展和功能复用",
    "loop": 3
  }
]